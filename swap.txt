 
chrome.fileSystem.chooseEntry(function (type: "saveFile") {
		writableFileEntry.createWriter(function(writer) {
		writer.onwriteend = function(e) {
		$("#OuptutText").html("Save complete!");
		};
		writer.write(new Blob([document.getElementById("HTMLFile").value], {type: 'text/plain'})); 
	}, errorHandler);
});		




function exportToDisk(){
console.log(chrome.runtime.lastError);
 chrome.fileSystem.chooseEntry( {
      type: 'saveFile',
      suggestedName: 'todos.txt',
      accepts: [ { description: 'Text files (*.txt)',
                   extensions: ['txt']} ],
      acceptsAllTypes: true
    }, exportToFileEntry);
}

function exportToFileEntry(fileEntry){
	fileEntry.createWriter(function(fileWriter) {
		alert("exportToFileEntry");
		/**
		var truncated = false;
		var content = ['<a id="a"><b id="b">this is just a test!</b></a>'];
		var blob = new Blob([content]);
	
		fileWriter.onwriteend = function(e) {
			if (!truncated) {
			truncated = true;
			this.truncate(blob.size);
			return;
			}
		};

	//	fileWriter.onerror = function(e) {
		//	status.innerText = 'Export failed: '+e.toString();
		//};
		**/
		fileWriter.write("this is written here");

		});
}
//})();
